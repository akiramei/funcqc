# funcqc性能調査プロジェクト

## 📋 プロジェクト概要

funcqcの分析機能の精度・信頼性・実用性を客観的に評価する性能調査プロジェクト。

**実施期間**: 2025年1月  
**実施方法**: 6段階のステップによる段階的検証  
**調査対象**: 45機能、3534関数の分析結果

## 🎯 調査の目的

1. **機能の全体把握**: 45機能の完全なインベントリ作成
2. **分析精度の検証**: funcqcの出力と実コードの詳細比較
3. **機能別性能評価**: 各分析機能の精度・信頼性評価
4. **実用性の判定**: 改善・廃止すべき機能の特定

## 📊 主要な調査結果

### 🎯 総合性能評価

**funcqc総合性能: B+ (75/100)**

### 🔍 Critical findings

- **循環依存検出**: 95%誤検知率（正常再帰を問題視）
- **Health Index**: 過度悲観（実際45-55相当を17.5と評価）
- **構造的ペナルティ**: 誤検知により-41.1ptsの過大減点

### ⭐ 高性能機能

- **similar機能**: 100%精度の重複検出
- **list機能**: 数値データ100%正確  
- **refactor-guard**: 独自の安全性評価
- **dep lint**: 動的アーキテクチャ検証

### ⚠️ 問題のある機能

- **dep cycles**: 95%誤検知で実用困難
- **search機能**: 機能重複、廃止推奨
- **構造的リスク評価**: 誤検知の累積で不正確

## 📚 調査ドキュメント構成

### [Step 1: 機能インベントリ](01-feature-inventory.md)
- 全45機能の体系的分類と機能説明
- 品質向上への貢献方法の整理

### [Step 2: 品質分析記録](02-quality-analysis.md)  
- funcqcによる自己分析結果の記録
- Health Score、複雑度、構造的問題の数値データ

### [Step 3: 自己分析詳細](03-self-analysis.md)
- 分析結果の背景となる実コード調査
- 高複雑度関数、循環依存、重複コードの実態

### [Step 4: 精度評価（従来版）](04-accuracy-assessment.md)
- 初期の精度評価（一部でfuncqc結果を前提とした分析）

### [Step 5: 精度分析（修正版）](step5-precision-analysis.md)
- **核心文書**: 実コードとfuncqc分析の詳細比較
- 誤検知・見逃しパターンの客観的評価
- 循環依存95%誤検知、Health Index過大悲観等の発見

### [Step 6: 機能評価（修正版）](step6-function-assessment.md)  
- 精度評価に基づく各機能の改善・廃止判定
- 100点満点による機能ランキング
- 維持・改善・廃止の具体的推奨

### [最終レポート](final-performance-report.md)
- **総合評価文書**: funcqc性能調査の最終結論
- 実用性評価、使用上の注意、効果的活用方法

## 🎯 調査結果の活用指針

### ✅ 即座利用推奨機能
- **similar**: 重複コード検出（100%精度）
- **list**: 基本情報取得（数値データ信頼可）
- **safe-delete**: デッドコード除去
- **refactor-guard**: リファクタリング安全性評価

### ⚠️ 注意深い利用が必要
- **health**: 参考程度、詳細分析と併用
- **scan**: 基本メトリクス信頼可、構造判定は要検証
- **dep show**: 依存関係分析として有用

### 🚫 使用非推奨
- **dep cycles**: 95%誤検知で実用困難
- **search**: 機能重複、list機能で代替

## 💡 効果的な活用方法

### 段階的導入アプローチ

#### Phase 1: 安全な基本活用
```bash
npm run dev -- similar          # 信頼性100%
npm run dev -- list --cc-ge 15  # 数値データ活用
npm run dev -- safe-delete      # 実用的機能
```

#### Phase 2: 注意深い分析活用  
```bash
npm run dev -- health --verbose # 詳細確認前提
npm run dev -- dep show main    # 可視化として活用
```

### 重要な使用上の注意

1. **Health Index**: 実際より過度に悲観的（17.5 vs 実際45-55相当）
2. **循環依存警告**: 95%が正常な再帰関数の誤検知
3. **構造的リスク**: 誤検知の累積で不正確
4. **数値メトリクス**: 複雑度・行数・Fan-inは100%信頼可

## 📊 業界ポジション

### 競合優位性
- **AST-based重複検出**: 業界最高水準
- **TypeScript特化**: 深度分析能力
- **独自機能**: 安全性評価、段階的リファクタリング

### 推奨使い分け
```
ESLint: 基本品質ルール
SonarQube: 総合品質メトリクス
funcqc: 構造分析・リファクタリング支援

最適組み合わせ: ESLint + funcqc + 人間判断
```

## 🏁 最終結論

**funcqc総合評価: B+ (75/100)**

### 強み
- 数値測定精度: 業界トップクラス
- 独自技術: 他ツールにない価値
- TypeScript特化: 深度分析能力

### 弱み  
- 文脈理解不足: 誤検知による判定ミス
- 機械的評価: ドメイン知識の欠如

### 推奨活用方針
数値データは信頼して活用、構造的判定は人間検証と併用することで、コード品質改善に大きな価値を発揮するツール。

---

この性能調査により、funcqcの実際の分析精度と実用性を客観的に評価し、効果的な活用方法と注意すべき制約を明確化しました。適切な使い方により、funcqcはコード品質向上の強力なパートナーとなります。